#! winxed

// Compiling and using nqp code within winxed.

function main()
{
    string source =
        "sub hello($msg) {\n" +
        "    say('Hi from nqp, ', $msg);\n" +
        "}\n"
    ;
    say('Source:');
    print(source);

    load_bytecode('nqp-rx.pbc');
    var nqp = compreg('NQP-rx');
    var code= nqp.compile(source);
    var hello=code();

    say("Executing: \"hello('winxed world');\"");
    hello('winxed world');
}

// End
